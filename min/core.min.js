/**
 * Simple JavaScript PDF Viewer
 * 
 * @version rolling-release
 * @license MIT
 * @author BrunoRNS
 * @see https://github.com/BrunoRNS/SimplePDFviewer
 * @see https://github.com/mozilla/pdf.js
 * @see https://www.jsdelivr.com/?docs=gh
 */
!function(e){"use strict";const t="3.11.174",r=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${t}/pdf.min.js`,n=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${t}/pdf.worker.min.js`;let o=!1;const i=[],l={};const a={available:function(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}(),setItem:function(e,t){this.available?localStorage.setItem(e,t):l[e]=t},getItem:function(e){return this.available?localStorage.getItem(e):l[e]||null},removeItem:function(e){this.available?localStorage.removeItem(e):delete l[e]}};function s(e){const t={"zoom-in":{svg:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>',fallback:"+"},"zoom-out":{svg:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path><line x1="8" y1="11" x2="14" y2="11"></line></svg>',fallback:"−"},fullscreen:{svg:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>',fallback:"⛶"},hamburger:{svg:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',fallback:"☰"}},r=t[e]||t.hamburger;return`<span class="icon-svg">${r.svg}</span><span class="icon-fallback" role="img">${r.fallback}</span>`}const c={primary:"#3498db",primaryHover:"#2980b9",primaryActive:"#1f618d",sidebarPrimary:"#2c3e50",sidebarHover:"#3d566e",sidebarBorder:"#34495e",containerBg:"#f0f2f5",disabled:"#bdc3c7",lightBorder:"#ddd"},d=-18,p=-36,u=8,f=-8;function m(e){let t=e.replace("#","");3===t.length&&(t=t.split("").map(e=>e+e).join(""));return[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)]}function h(e,t,r){return"#"+[e,t,r].map(e=>{const t=e.toString(16);return 1===t.length?"0"+t:t}).join("")}function g(e){const[t,r,n]=m(e),o=t/255,i=r/255,l=n/255,a=Math.max(o,i,l),s=Math.min(o,i,l);let c=0,d=0;const p=(a+s)/2;if(a!==s){const e=a-s;switch(d=p>.5?e/(2-a-s):e/(a+s),a){case o:c=((i-l)/e+(i<l?6:0))/6;break;case i:c=((l-o)/e+2)/6;break;case l:c=((o-i)/e+4)/6}}return{h:Math.round(360*c),s:Math.round(100*d),l:Math.round(100*p)}}function v(e,t,r){let n,o,i;if(e/=360,r/=100,0===(t/=100))n=o=i=r;else{const l=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),a=r<.5?r*(1+t):r+t-r*t,s=2*r-a;n=l(s,a,e+1/3),o=l(s,a,e),i=l(s,a,e-1/3)}return h(Math.round(255*n),Math.round(255*o),Math.round(255*i))}const b=(e=null)=>{const t=document.getElementById("pdf-viewer-styles"),r=e||c,n=t||document.createElement("style");n.id="pdf-viewer-styles",n.textContent=`\n            .pdf-viewer-container { display: flex; height: 100%; width: 100%; font-family: system-ui, -apple-system, sans-serif; background: ${r.containerBg}; overflow: hidden; position: relative; }\n            .pdf-viewer-sidebar { position: absolute; top: 0; left: -100%; width: 280px; height: 100%; background: ${r.sidebarPrimary}; color: #fff; transition: all 0.3s ease; z-index: 1001; overflow-y: auto; box-shadow: 2px 0 10px rgba(0,0,0,0.2); }\n            .pdf-viewer-sidebar.open { left: 0; }\n            .pdf-viewer-sidebar.collapsed { width: 60px; padding: 0; }\n            .pdf-viewer-sidebar.collapsed > div { display: none; }\n            .pdf-viewer-sidebar.collapsed .pdf-viewer-chapter-item { padding: 8px 0; text-align: center; }\n            .pdf-viewer-main { flex: 1; display: flex; flex-direction: column; min-width: 0; }\n            .pdf-viewer-controls { display: flex; align-items: center; justify-content: center; gap: 15px; padding: 10px; background: #fff; border-bottom: 1px solid ${r.lightBorder}; z-index: 10; }\n            .pdf-viewer-canvas-container { position: relative; flex: 1; overflow: auto; padding: 5px; background: ${r.containerBg}; scroll-behavior: smooth; width: 100%; display: block; box-sizing: border-box; }\n            .pdf-viewer-canvas { width: 100%; height: auto; box-shadow: 0 0 15px rgba(0,0,0,0.3); background: #fff; display: block; }\n            .pdf-viewer-text-layer { position: absolute; top: 0; left: 0; right: 0; z-index: 1; user-select: text; -webkit-user-select: text; -moz-user-select: text; }\n            .pdf-viewer-text-layer > span { position: absolute; white-space: nowrap; cursor: text; color: transparent; -moz-user-select: text; -webkit-user-select: text; user-select: text; margin: 0; padding: 0; border: none; background: transparent; }\n            .pdf-viewer-text-layer > span::selection { background: rgba(0, 0, 255, 0.3); color: transparent; }\n            .pdf-viewer-text-layer > span::-moz-selection { background: rgba(0, 0, 255, 0.3); color: transparent; }\n            .pdf-viewer-text-layer.disabled { pointer-events: none; user-select: none; }\n            .pdf-viewer-loading-overlay { position: absolute; top:0; left:0; right:0; bottom:0; background: rgba(255,255,255,0.7); display: flex; align-items: center; justify-content: center; z-index: 20; }\n            .pdf-viewer-footer { padding: 10px; background: #f0f0f0; border-top: 1px solid ${r.lightBorder}; text-align: center; font-size: 12px; color: #666; }\n            .pdf-viewer-chapter-item { padding: 12px 15px; cursor: pointer; border-bottom: 1px solid ${r.sidebarBorder}; transition: background 0.2s; }\n            .pdf-viewer-chapter-item:hover { background: ${r.sidebarHover}; }\n            .pdf-viewer-chapter-item.active { background: ${r.primary}; border-left: 4px solid #fff; }\n            .pdf-viewer-btn { padding: 10px 16px; min-height: 44px; min-width: 44px; border: none; border-radius: 4px; cursor: pointer; background: ${r.primary}; color: white; font-weight: 500; display: flex; align-items: center; justify-content: center; transition: background 0.2s; }\n            .pdf-viewer-btn:hover { background: ${r.primaryHover}; }\n            .pdf-viewer-btn:active { background: ${r.primaryActive}; }\n            .pdf-viewer-btn:disabled { background: ${r.disabled}; cursor: not-allowed; }\n            .zoom-controls { display: flex; gap: 5px; align-items: center; }\n            .zoom-controls .zoom-input { padding: 8px 12px; width: 60px; border: 1px solid ${r.lightBorder}; border-radius: 4px; font-size: 14px; text-align: center; font-weight: 500; }\n            .zoom-controls .zoom-input:focus { outline: none; border-color: ${r.primary}; box-shadow: 0 0 3px ${r.primary}; }\n            .icon-svg { display: inline-flex; width: 20px; height: 20px; color: inherit; align-items: center; justify-content: center; }\n            .icon-svg svg { width: 100%; height: 100%; }\n            .icon-fallback { display: none; font-size: 16px; line-height: 1; font-weight: bold; }\n            .pdf-viewer-main.fullscreen { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 10000; display: flex; flex-direction: column; background: ${r.sidebarPrimary}; }\n            .pdf-viewer-main.fullscreen .pdf-viewer-canvas-container { background: ${r.containerBg}; padding: 3px; box-sizing: border-box; }\n            .pdf-viewer-main.fullscreen .pdf-viewer-controls { position: relative; background: ${r.sidebarPrimary}; border-bottom: 3px solid ${r.primary}; }\n            .pdf-viewer-main.fullscreen .pdf-viewer-footer { position: relative; background: ${r.sidebarPrimary}; border-top: 3px solid ${r.primary}; color: #ccc; }\n            .pdf-viewer-main.fullscreen .pdf-viewer-toggle-btn { display: none; }\n            @media (min-width: 768px) {\n                .pdf-viewer-sidebar { position: relative; left: 0; }\n                .pdf-viewer-toggle-btn { display: none; }\n            }\n        `,t||document.head.appendChild(n)};function y(e){const t=function(e){if(!/^#[0-9A-Fa-f]{3}([0-9A-Fa-f]{3})?$/.test(e))return{valid:!1,error:"Invalid hex format. Use #RRGGBB or #RGB"};const t=g(e),r=t.l;let n=r;return r<15?n=25:r>85&&(n=75),{valid:!0,color:v(t.h,t.s,n),original:e,wasAdjusted:n!==r}}(e);if(!t.valid)return null;const r=t.color,n=g(r),o=Math.max(0,Math.min(100,n.l+d)),i=Math.max(0,Math.min(100,n.l+p)),l={...n};l.s=Math.max(0,l.s-30),l.l=Math.max(0,Math.min(100,l.l-25));const a=Math.max(0,Math.min(100,l.l+u)),s=Math.max(0,Math.min(100,l.l+f)),c=function(e,t,r){const[n,o,i]=m(e),[l,a,s]=m(t),c=Math.max(0,Math.min(1,r)),d=Math.round(n*(1-c)+l*c),p=Math.round(o*(1-c)+a*c),u=Math.round(i*(1-c)+s*c);return h(d,p,u)}("#f0f2f5",r,.15),b=v(n.h,Math.max(0,n.s-40),85),y=v(n.h,10,75);return{primary:r,primaryHover:v(n.h,n.s,o),primaryActive:v(n.h,n.s,i),sidebarPrimary:v(l.h,l.s,l.l),sidebarHover:v(l.h,l.s,a),sidebarBorder:v(l.h,l.s,s),containerBg:c,disabled:y,lightBorder:b}}e.PDFViewer={init:function(t,l,d={}){const p=(e=>e?e instanceof HTMLElement?{valid:!0,error:null}:{valid:!1,error:"Container must be an HTML element."}:{valid:!1,error:"Container element is required."})(t);if(!p.valid)return console.error(`PDFViewer: ${p.error}`),null;const u=(e=>{if(!e)return{valid:!1,error:"Course object is required."};if("string"!=typeof e.title)return{valid:!1,error:"Course must have a title (string)."};if(!Array.isArray(e.modules))return{valid:!1,error:"Course must have modules array."};if(0===e.modules.length)return{valid:!1,error:"Course must have at least one module."};for(let t=0;t<e.modules.length;t++){const r=e.modules[t];if("string"!=typeof r.title)return{valid:!1,error:`Module ${t} must have a title.`};if(!Array.isArray(r.chapters))return{valid:!1,error:`Module ${t} must have chapters array.`};if(0===r.chapters.length)return{valid:!1,error:`Module ${t} must have at least one chapter.`};for(let e=0;e<r.chapters.length;e++){const n=r.chapters[e];if("string"!=typeof n.title)return{valid:!1,error:`Module ${t}, Chapter ${e} must have a title.`};if("string"!=typeof n.pdf)return{valid:!1,error:`Module ${t}, Chapter ${e} must have a pdf URL.`}}}return{valid:!0,error:null}})(l);if(!u.valid)return console.error(`PDFViewer: ${u.error}`),null;let f=c;if(d.colorTheme){const e=y(d.colorTheme);e?f=e:console.warn(`\n                PDFViewer: Invalid colorTheme '${d.colorTheme}', using default theme\n                `)}b(f);const m={currentModule:0,currentChapter:0,currentPage:1,pdfDoc:null,renderTask:null,onError:d.onError||(()=>{}),listeners:{},themeColors:f,zoom:100,viewportX:0,viewportY:0,enableTextSelection:!1!==d.enableTextSelection,currentTextLayer:null,nextPage:()=>F(),prevPage:()=>D(),loadChapter:(e,t)=>q(e,t),setTheme:e=>function(e){const t=y(e);if(!t)return console.warn(`PDFViewer: Invalid color theme '${e}', theme not changed`),!1;return m.themeColors=t,b(t),!0}(e),setZoom:e=>P(e),setTextSelectionEnabled:e=>function(e){m.enableTextSelection=e;const r=t.querySelector(".pdf-viewer-text-layer");r&&(e?(r.style.pointerEvents="auto",r.classList.remove("disabled")):(r.style.pointerEvents="none",r.classList.add("disabled")))}(e),destroy:()=>function(){document.removeEventListener("keydown",_);const e=t.querySelector(".pdf-viewer-canvas-container");e&&m.listeners.wheelHandler&&e.removeEventListener("wheel",m.listeners.wheelHandler);e&&e.removeEventListener("scroll",T,!0);m.resizeObserver&&m.resizeObserver.disconnect();m.renderTask&&m.renderTask.cancel();m.currentTextLayer&&(m.currentTextLayer.cancel(),m.currentTextLayer=null)}()};t.innerHTML=`\n        <div class="pdf-viewer-container">\n            <aside class="pdf-viewer-sidebar" role="navigation" aria-label="PDF chapters">\n            </aside>\n            <main class="pdf-viewer-main">\n                <div class="pdf-viewer-controls" role="toolbar" aria-label="PDF viewer controls">\n                    <button class="pdf-viewer-btn pdf-viewer-toggle-btn" aria-label="Toggle sidebar" aria-expanded="false">\n                        ${s("hamburger")}\n                    </button>\n\n                    <button class="pdf-viewer-btn prev-btn" aria-label="Previous page">\n                        Previous\n                    </button>\n\n                    <button class="pdf-viewer-btn next-btn" aria-label="Next page">\n                        Next\n                    </button>\n\n                    <div class="zoom-controls">\n                        <button class="pdf-viewer-btn zoom-out-btn" aria-label="Zoom out" title="Zoom out">\n                            ${s("zoom-out")}\n                        </button>\n\n                        <input type="text" class="zoom-input" aria-label="Zoom level" placeholder="100%" value="100%">\n\n                        <button class="pdf-viewer-btn zoom-in-btn" aria-label="Zoom in" title="Zoom in">\n                            ${s("zoom-in")}\n                        </button>\n                    </div>\n\n                    <button class="pdf-viewer-btn fullscreen-btn" aria-label="Toggle fullscreen" title="Fullscreen (ESC to exit)">\n                        ${s("fullscreen")}\n                    </button>\n                </div>\n\n                <div class="pdf-viewer-canvas-container" tabindex="0">\n                    <canvas class="pdf-viewer-canvas" role="img" aria-label="PDF page content"></canvas>\n                    <div class="pdf-viewer-text-layer"></div>\n                </div>\n\n                <div class="pdf-viewer-footer" role="status" aria-live="polite" aria-atomic="true">\n                    <span class="pagination-info">\n                        Page <span class="page">1</span>/<span class="pages">-</span> |\n                        Chapter <span class="chapter">1</span>/<span class="chapters">-</span> |\n                        Module <span class="module">1</span>/<span class="modules">-</span>\n                    </span>\n                </div>\n            </main>\n\n            <div class="pdf-viewer-loading-overlay" style="display:none;" aria-live="polite">\n                Loading...\n            </div>\n        </div>\n        `;const h=t.querySelector(".pdf-viewer-sidebar"),g=t.querySelector(".pdf-viewer-canvas"),v=t.querySelector(".pdf-viewer-loading-overlay"),x=g.getContext("2d"),w=()=>{k(),M()},k=()=>{const e=t.querySelector(".prev-btn"),r=t.querySelector(".next-btn");if(!e||!r||!m.pdfDoc)return;const n=1===m.currentPage&&0===m.currentChapter&&0===m.currentModule,o=m.currentModule===l.modules.length-1&&m.currentChapter===l.modules[m.currentModule].chapters.length-1,i=m.currentPage===m.pdfDoc.numPages&&o;e.disabled=n,r.disabled=i},M=()=>{if(!m.pdfDoc)return;const e=m.currentModule+1,r=l.modules.length,n=m.currentChapter+1,o=l.modules[m.currentModule].chapters.length,i=t.querySelector(".pagination-info .page"),a=t.querySelector(".pagination-info .pages"),s=t.querySelector(".pagination-info .chapter"),c=t.querySelector(".pagination-info .chapters"),d=t.querySelector(".pagination-info .module"),p=t.querySelector(".pagination-info .modules");i&&(i.textContent=m.currentPage),a&&(a.textContent=m.pdfDoc?m.pdfDoc.numPages:"-"),s&&(s.textContent=n),c&&(c.textContent=o),d&&(d.textContent=e),p&&(p.textContent=r)};function z(){const e=t.querySelector(".zoom-input"),r=t.querySelector(".zoom-out-btn"),n=t.querySelector(".zoom-in-btn");e&&(e.value=m.zoom+"%"),r&&(r.disabled=m.zoom<=100),n&&(n.disabled=m.zoom>=200)}const C=e=>v.style.display=e?"flex":"none";let $=!1;const S=()=>{const e=R.style.scrollBehavior;R.style.scrollBehavior="auto",R.scrollTop=0,R.scrollLeft=0,R.scroll(0,0),R.scrollTo(0,0);let t=0;const r=()=>{if(t<15&$){const e=R.scrollTop,n=R.scrollLeft;0===e&&0===n||(R.scrollTop=0,R.scrollLeft=0,R.scroll(0,0),R.scrollTo(0,0)),t++,requestAnimationFrame(r)}};requestAnimationFrame(r),setTimeout(()=>{$=!1,R.style.scrollBehavior=e},600)},T=e=>{!$||0===R.scrollTop&&0===R.scrollLeft||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),R.scrollTop=0,R.scrollLeft=0)};function P(e){if((e=Math.max(100,Math.min(200,Math.floor(e))))===m.zoom)return;const r=R,n=r.scrollWidth>0?r.scrollLeft/r.scrollWidth:0,o=r.scrollHeight>0?r.scrollTop/r.scrollHeight:0;m.zoom=e;const i=t.querySelector(".zoom-input");i&&(i.value=e+"%");const l=t.querySelector(".zoom-out-btn"),a=t.querySelector(".zoom-in-btn");l&&(l.disabled=e<=100),a&&(a.disabled=e>=200),z(),L(m.currentPage).then(()=>{setTimeout(()=>{r.scrollWidth>0&&(r.scrollLeft=n*r.scrollWidth),r.scrollHeight>0&&(r.scrollTop=o*r.scrollHeight)},0)})}function L(e){if(!(!m.pdfDoc||e<1||e>m.pdfDoc.numPages))return m.renderTask&&m.renderTask.cancel(),m.pdfDoc.getPage(e).then(e=>{try{const t=g.parentElement;let r=t.clientWidth;const n=window.getComputedStyle(t),o=parseFloat(n.paddingLeft)||0;r-=o+(parseFloat(n.paddingRight)||0);const i=window.devicePixelRatio||1;let l=r/e.getViewport({scale:1}).width*(m.zoom/100);m.zoom<=100&&(l=Math.max(1,l));const a=e.getViewport({scale:l*i});return g.width=a.width,g.height=a.height,g.style.width=a.width/i+"px",g.style.height=a.height/i+"px",m.renderTask=e.render({canvasContext:x,viewport:a}),m.renderTask.promise.then(()=>E(e,a,l))}catch(e){console.error("Error rendering page:",e),m.onError({type:"render",message:"Failed to render page",error:e})}}).catch(e=>{"RenderingCancelledException"!==e.name&&(console.error("Error rendering page:",e),m.onError({type:"render",message:"Failed to render page",error:e}))})}async function E(e,r,n){if(m.enableTextSelection)try{const o=t.querySelector(".pdf-viewer-text-layer");if(!o)return;o.innerHTML="";const i=await e.getTextContent();if(!i||!i.items||0===i.items.length)return;const l=t.querySelector(".pdf-viewer-canvas");if(!l)return;o.style.width=l.offsetWidth+"px",o.style.height=l.offsetHeight+"px",o.style.top=l.offsetTop+"px",o.style.left=l.offsetLeft+"px";window.devicePixelRatio;const a=e.getViewport({scale:1});for(let e of i.items){if(!e.str||""===e.str.trim())continue;const t=document.createElement("span");t.textContent=e.str;const i=e.transform,l=Math.max(Math.abs(i[0]),Math.abs(i[3]),8),s=i[4],c=i[5],d=s*(r.width/a.width),p=(a.height-c)*(r.height/a.height),u=d/r.width*100,f=p/r.height*100;t.style.position="absolute",t.style.left=u+"%",t.style.top=f+"%",t.style.fontSize=l*n+"px",t.style.fontFamily=e.fontName||"sans-serif",t.style.color="transparent",t.style.whiteSpace="nowrap",t.style.cursor="text",t.style.userSelect="text",t.style.WebkitUserSelect="text",t.style.MozUserSelect="text",t.style.margin="0",t.style.padding="0",t.style.border="none",t.style.backgroundColor="transparent",t.style.display="inline-block",t.style.lineHeight="normal",t.style.pointerEvents="auto",t.style.transform="translate(-5%, -60%)",t.style.transformOrigin="left center",o.appendChild(t)}o.style.display="block",m.currentTextLayer=o}catch(e){console.warn("Failed to render text layer:",e)}}function q(t,a){const s=l.modules[t]?.chapters[a];if(!s){const e=`\n                    Invalid module or chapter index: module=${t}, chapter=${a}\n                `;return console.error(e),void m.onError({type:"load",message:e})}$=!0,C(!0),m.currentModule=t,m.currentChapter=a,m.zoom=100,function(t){if(void 0!==e.pdfjsLib)return t();if(i.push(t),o)return;o=!0;const l=document.createElement("script");l.src=r,l.onload=()=>{for(e.pdfjsLib.GlobalWorkerOptions.workerSrc=n;i.length>0;)i.shift()()},document.head.appendChild(l)}(()=>{try{pdfjsLib.getDocument(s.pdf).promise.then(e=>{m.pdfDoc=e,m.currentPage=1,L(1).then(()=>{S(),z()}),w(),h.innerHTML=`<div style="padding:20px; font-weight:bold; border-bottom:1px solid #444;">${l.title}</div>`,l.modules.forEach((e,t)=>{e.chapters.forEach((r,n)=>{const o=document.createElement("div");o.className="\n                        pdf-viewer-chapter-item "+(t===m.currentModule&&n===m.currentChapter?"active":""),o.innerHTML=`\n                        <small style="display:block; opacity:0.7">${e.title}</small> ${r.title}`,o.onclick=()=>{q(t,n),window.innerWidth<768&&h.classList.remove("open")},h.appendChild(o)})})}).catch(e=>{console.error("Error loading PDF:",e),m.onError({type:"load",message:`Failed to load PDF from ${s.pdf}`,error:e});const r=l.modules[t].title;alert(`Error loading PDF: ${r} > ${s.title}`)}).finally(()=>C(!1))}catch(e){console.error("Error setting up PDF loading:",e),m.onError({type:"load",message:"Failed to set up PDF loading",error:e}),C(!1)}})}function F(){m.currentPage<m.pdfDoc.numPages?($=!0,m.currentPage++,m.zoom=100,L(m.currentPage).then(()=>{S(),z()}),w()):l.modules[m.currentModule].chapters[m.currentChapter+1]?q(m.currentModule,m.currentChapter+1):l.modules[m.currentModule+1]&&q(m.currentModule+1,0)}function D(){m.currentPage>1?($=!0,m.currentPage--,m.zoom=100,L(m.currentPage).then(()=>{S(),z()}),w()):m.currentChapter>0&&q(m.currentModule,m.currentChapter-1)}const H=((e,t)=>{let r;return function(...n){clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),e(...n)},t)}})(()=>{m.pdfDoc&&L(m.currentPage)},150),B=t.querySelector(".next-btn"),j=t.querySelector(".prev-btn"),I=t.querySelector(".pdf-viewer-toggle-btn"),A=t.querySelector(".fullscreen-btn"),R=t.querySelector(".pdf-viewer-canvas-container");R.addEventListener("click",()=>R.focus()),R.addEventListener("scroll",T,!0),m.isFullscreen=!1;const V="pdfViewer_sidebarCollapsed";function W(){m.isFullscreen=!m.isFullscreen;const e=t.querySelector(".pdf-viewer-main");m.isFullscreen?(e.classList.add("fullscreen"),A.setAttribute("aria-pressed","true")):(e.classList.remove("fullscreen"),A.setAttribute("aria-pressed","false"))}m.sidebarCollapsed="true"===a.getItem(V),m.sidebarCollapsed&&h.classList.add("collapsed"),B.onclick=F,j.onclick=D,A.onclick=W,I.onclick=()=>{if(window.innerWidth<768){const e=h.classList.toggle("open");I.setAttribute("aria-expanded",e)}else m.sidebarCollapsed=!m.sidebarCollapsed,h.classList.toggle("collapsed"),a.setItem(V,m.sidebarCollapsed),I.setAttribute("aria-pressed",m.sidebarCollapsed)};const N=t.querySelector(".zoom-out-btn"),O=t.querySelector(".zoom-in-btn"),Z=t.querySelector(".zoom-input");N&&(N.onclick=function(){P(m.zoom-10)}),O&&(O.onclick=function(){P(m.zoom+10)}),Z&&(Z.addEventListener("keypress",e=>{if("Enter"===e.key){let e=parseInt(Z.value);isNaN(e)?Z.value=m.zoom+"%":P(e)}}),Z.addEventListener("blur",()=>{/^\d{3}%?$/.test(Z.value.trim())||(Z.value=m.zoom+"%")}));const _=e=>{t.contains(document.activeElement)&&("ArrowRight"===e.key&&F(),"ArrowLeft"===e.key&&D(),"Escape"===e.key&&m.isFullscreen&&W())};m.listeners.keyHandler=_,document.addEventListener("keydown",_);const G=e=>{if(R===document.activeElement||R.contains(e.target)){const t=R,r=t.scrollHeight-t.scrollTop<=t.clientHeight+1,n=0===t.scrollTop,o=e.deltaY>0,i=e.deltaY<0;return void((r&&o||n&&i)&&e.preventDefault())}};m.listeners.wheelHandler=G,R.addEventListener("wheel",G,{passive:!1});const U=new ResizeObserver(H);return U.observe(g.parentElement),m.resizeObserver=U,z(),q(0,0),m}}}(window);