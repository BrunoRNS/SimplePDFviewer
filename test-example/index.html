<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SimplePDFviewer Test - CDN Loading</title>
        <style type="text/css">
            body { font-family: Arial, sans-serif; margin: 20px; }
            #viewer { height: 80vh; border: 1px solid #ccc; }
            .info { background: #f0f0f0; padding: 10px; margin-bottom: 20px; border-radius: 4px; }
            .error { color: #d32f2f; }
            .success { color: #388e3c; }
            code { background: #f5f5f5; padding: 2px 4px; border-radius: 3px; }
        </style>
    </head>
    <body>
        <h1>SimplePDFviewer Test</h1>
        <div class="info">
            <p>
                Loading SimplePDFviewer from CDN: <code>http://localhost:8081/core.min.js</code>
            </p>
            <p id="status">Loading...</p>
        </div>
        <div id="viewer"></div>

        <script type="text/javascript" src="http://localhost:8081/core.min.js"></script>

        <script type="text/javascript">
            function initializeViewer() {
                if (typeof PDFViewer === 'undefined') {
                    document.getElementById('status').innerHTML = `
                        <span class="error">PDFViewer library not loaded</span>
                    `;
                    return;
                }

                document.getElementById('status').innerHTML = `
                    <span class="success">SimplePDFviewer loaded from CDN successfully</span>
                `;

                fetch('course.json')
                    .then(response => response.json())
                    .then(course => {
                        const viewer = PDFViewer.init(
                            document.getElementById('viewer'),
                            course,
                            {
                                onError: (error) => {
                                    console.error('Viewer error:', error);
                                    document.getElementById('status').innerHTML += `
                                    <br><span class="error">
                                        Viewer Error: ${error.message}
                                    </span>`;
                                }
                            }
                        );
                        if (viewer) {
                            document.getElementById('status').innerHTML += `
                            <br><span class="success">
                                Viewer initialized successfully
                            </span>`;
                        } else {
                            document.getElementById('status').innerHTML += `
                            <br><span class="error">
                                Failed to initialize viewer
                            </span>`;
                        }
                    })
                    .catch(err => {
                        console.error('Error loading course:', err);
                        document.getElementById('status').innerHTML += `
                        <br><span class="error">
                            Error loading course: ${err.message}
                        </span>`;
                        document.getElementById('viewer').innerHTML = `
                        <p style="color:red">
                            Error loading course. Check browser console for details.
                        </p>`;
                    });
            }

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initializeViewer);
            } else {
                initializeViewer();
            }
        </script>
    </body>
</html>